on:
  push:
    branches: [main]
  workflow_dispatch:

name: Bun Test
jobs:
  my-job:
    name: my-job
    runs-on: ubuntu-latest
    steps:
      # Checkout the code
      - uses: actions/checkout@v4
      - uses: oven-sh/setup-bun@v2

      # Install dependencies in frontend
      - run: |
          cd frontend
          bun install

      # Install dependencies in backend
      - run: |
          cd backend
          bun install

      # Run bun run dev and stop after 3 seconds
      - run: |
          bun run dev &
          sleep 3
          kill $!

      # Run bun run build
      - run: bun run build

      # Run bun run start and stop after 3 seconds
      - run: |
          bun run start &
          sleep 3
          kill $!
